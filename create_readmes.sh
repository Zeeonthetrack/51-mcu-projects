#!/bin/bash
# 为每个实验文件夹创建README.md模板

declare -A descriptions=(
    ["01-2-1点亮LED"]="单片机第一个程序，控制LED亮灭"
    ["02-3-1独立按键控制LED"]="通过独立按键控制LED状态"
    ["03-3-2独立按键控制取反"]="按键控制LED取反操作"
    ["04-5-1模块化编程"]="学习代码模块化组织方法"
    ["05-5-2LCD1602调试工具"]="使用LCD1602作为调试信息显示"
    ["06-6-1矩阵键盘"]="矩阵键盘扫描与编码"
    ["07-7-1按键控制LED"]="定时器中断应用"
    ["08-7-2定时器时钟"]="定时器实现时钟功能"
    ["09-7-3定时器流水灯"]="定时器控制流水灯效果"
    ["10-8-1串口向电脑发送"]="串口发送数据到PC"
    ["11-8-2电脑用串口控制"]="PC通过串口控制单片机"
    ["12-8-3UART的实际应用"]="串口通信综合应用"
    ["13-11-1蜂鸣器播放提示音"]="蜂鸣器控制与音乐播放"
    ["14-13-1DS18B20温度读取"]="单总线温度传感器读取"
    ["15-15-1LED呼吸灯"]="PWM实现LED呼吸灯效果"
    ["16-15-2电机PWM"]="PWM控制电机速度"
    ["17-EEPROM"]="EEPROM数据存储应用"
)

for folder in */; do
    # 去掉末尾的斜杠
    folder_name="${folder%/}"
    
    # 跳过docs和libs
    if [[ "$folder_name" == "docs" ]] || [[ "$folder_name" == "libs" ]]; then
        continue
    fi
    
    # 创建README.md
    cat > "${folder}README.md" << EOR
# 实验：${folder_name#*-}

## 实验目的
${descriptions[$folder_name]:-（请填写本实验的学习目标）}

## 硬件连接
（请描述硬件连接方式）

## 关键代码
\`\`\`c
// 这里可以放关键代码片段
\`\`\`

## 实验现象
（描述实验成功时的现象）

## 学习心得
（记录学习过程中的收获和遇到的问题）
EOR
    
    echo "✅ 已创建: ${folder}README.md"
done
